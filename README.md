# üìä Traffic & Finance Dashboard ‚Äî Streamlit App

## –©–æ —Ü–µ

–ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏–π –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É KPI —Ç—Ä–∞—Ñ—ñ–∫—É —Ç–∞ —Ñ—ñ–Ω–∞–Ω—Å—ñ–≤ iGaming-–æ–ø–µ—Ä–∞—Ü—ñ–π.

**5 —Å—Ç–æ—Ä—ñ–Ω–æ–∫:**
- üè† **Executive Summary** ‚Äî scorecards, —Ç—Ä–µ–Ω–¥–∏, split analysis, conversion deep dive, country matrix
- üìä **Daily Operations** ‚Äî today vs yesterday, daily table, registration methods
- üìà **Weekly Trends** ‚Äî volume bars + FTD line, Reg2Dep vs eCPA
- üí≥ **Payment Analytics** ‚Äî approval by method, geo breakdown, chargeback analysis
- üë• **Agent Performance** ‚Äî leaderboard, quality vs volume scatter, fraud alerts

**–§—ñ—á—ñ:**
- üåô Dark theme (—Å—Ç–∏–ª—å —è–∫ —É –ø—Ä–æ—Ç–æ—Ç–∏–ø—ñ)
- üîÑ Comparison –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º –ø–µ—Ä—ñ–æ–¥–æ–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π)
- üéõÔ∏è –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏: –¥–∞—Ç–∏, –∫—Ä–∞—ó–Ω–∏, –±—Ä–µ–Ω–¥–∏, –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏, –¥–∂–µ—Ä–µ–ª–∞
- üé® Heatmap —É —Ç–∞–±–ª–∏—Ü—è—Ö (–∑–µ–ª–µ–Ω–∏–π ‚Üí –∂–æ–≤—Ç–∏–π ‚Üí —á–µ—Ä–≤–æ–Ω–∏–π)
- ‚ö° Alert banner –∫–æ–ª–∏ Reg2Dep < 10%
- üìä 20+ –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ —Ç–∞ —Ç–∞–±–ª–∏—Ü—å

---

## üöÄ –Ø–∫ –∑–∞–¥–µ–ø–ª–æ—ó—Ç–∏ –∑–∞ 5 —Ö–≤–∏–ª–∏–Ω

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–∏ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π

1. –ó–∞–π–¥–∏ –Ω–∞ **github.com** ‚Üí –Ω–∞—Ç–∏—Å–Ω–∏ **"+"** ‚Üí **New repository**
2. –ù–∞–∑–≤–∞: `tf-dashboard`
3. –ü—É–±–ª—ñ—á–Ω–∏–π (Public)
4. –ù–∞—Ç–∏—Å–Ω–∏ **Create repository**

### –ö—Ä–æ–∫ 2: –ó–∞–≤–∞–Ω—Ç–∞–∂ —Ñ–∞–π–ª–∏

–ó–∞–≤–∞–Ω—Ç–∞–∂ —Ü—ñ —Ñ–∞–π–ª–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:

```
tf-dashboard/
‚îú‚îÄ‚îÄ app.py                              ‚Üê –æ—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –¥–æ–¥–∞—Ç–∫—É
‚îú‚îÄ‚îÄ requirements.txt                    ‚Üê –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Python
‚îú‚îÄ‚îÄ TF_Dashboard_Dataset_v2.xlsx        ‚Üê –¥–∞—Ç–∞—Å–µ—Ç
‚îú‚îÄ‚îÄ .streamlit/
‚îÇ   ‚îî‚îÄ‚îÄ config.toml                     ‚Üê –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ–º–∏
‚îî‚îÄ‚îÄ README.md                           ‚Üê —Ü–µ–π —Ñ–∞–π–ª
```

**–Ø–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏:**
- –ù–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ repo –Ω–∞—Ç–∏—Å–Ω–∏ **"Add file"** ‚Üí **"Upload files"**
- –ü–µ—Ä–µ—Ç—è–≥–Ω–∏ –≤—Å—ñ —Ñ–∞–π–ª–∏
- –ù–∞—Ç–∏—Å–Ω–∏ **"Commit changes"**

‚ö†Ô∏è –î–ª—è –ø–∞–ø–∫–∏ `.streamlit/config.toml`:
- –ù–∞—Ç–∏—Å–Ω–∏ **"Add file"** ‚Üí **"Create new file"**
- –í –ø–æ–ª—ñ —ñ–º–µ–Ω—ñ –Ω–∞–ø–∏—à–∏: `.streamlit/config.toml`
- –í—Å—Ç–∞–≤—å –≤–º—ñ—Å—Ç —Ñ–∞–π–ª—É config.toml
- Commit

### –ö—Ä–æ–∫ 3: –î–µ–ø–ª–æ–π –Ω–∞ Streamlit Cloud

1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ **share.streamlit.io**
2. –£–≤—ñ–π–¥–∏ —á–µ—Ä–µ–∑ GitHub
3. –ù–∞—Ç–∏—Å–Ω–∏ **"New app"**
4. –û–±–µ—Ä–∏:
   - Repository: `tf-dashboard`
   - Branch: `main`
   - Main file path: `app.py`
5. –ù–∞—Ç–∏—Å–Ω–∏ **"Deploy!"**
6. –ó–∞—á–µ–∫–∞–π 2-3 —Ö–≤–∏–ª–∏–Ω–∏

### –ö—Ä–æ–∫ 4: –ì–æ—Ç–æ–≤–æ! üéâ

–¢–∏ –æ—Ç—Ä–∏–º–∞—î—à URL —Ç–∏–ø—É:
```
https://tf-dashboard.streamlit.app
```

–í—ñ–¥–ø—Ä–∞–≤ —Ü–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –±—É–¥—å-–∫–æ–º—É ‚Äî –≤–æ–Ω–∏ –ø–æ–±–∞—á–∞—Ç—å –∂–∏–≤–∏–π –¥–∞—à–±–æ—Ä–¥.

---

## üîß –Ø–∫ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ

### –í–∞—Ä—ñ–∞–Ω—Ç –ê: –ó–∞–º—ñ–Ω–∏—Ç–∏ Excel —Ñ–∞–π–ª
1. –ï–∫—Å–ø–æ—Ä—Ç—É–π –¥–∞–Ω—ñ –∑ –∞–¥–º—ñ–Ω–∫–∏/–ü–ü —É —Ç–∞–∫–æ–º—É –∂ —Ñ–æ—Ä–º–∞—Ç—ñ
2. –ó–∞–º—ñ–Ω–∏—Ç–∏ —Ñ–∞–π–ª `TF_Dashboard_Dataset_v2.xlsx` –≤ repo
3. Streamlit –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å—Å—è

### –í–∞—Ä—ñ–∞–Ω—Ç –ë: –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ BigQuery
–ó–∞–º—ñ–Ω–∏ —Ñ—É–Ω–∫—Ü—ñ—é `load_data()` –≤ `app.py` –Ω–∞:

```python
from google.cloud import bigquery
import streamlit as st

@st.cache_data(ttl=3600)
def load_data():
    client = bigquery.Client()
    
    traffic = client.query("""
        SELECT * FROM `project.dataset.daily_traffic`
        WHERE date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 MONTH)
    """).to_dataframe()
    
    payments = client.query("""
        SELECT * FROM `project.dataset.payments`
        WHERE date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 MONTH)
    """).to_dataframe()
    
    # ... –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –¥–ª—è —ñ–Ω—à–∏—Ö —Ç–∞–±–ª–∏—Ü—å
    
    return traffic, payments, agents, geo_dim
```

–î–æ–¥–∞–π –≤ `requirements.txt`:
```
google-cloud-bigquery>=3.0.0
db-dtypes>=1.0.0
```

–Ü –≤ Streamlit Cloud ‚Üí Settings ‚Üí Secrets –¥–æ–¥–∞–π JSON –∫–ª—é—á —Å–µ—Ä–≤—ñ—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞.

### –í–∞—Ä—ñ–∞–Ω—Ç –í: Google Sheets (live)
```python
import gspread
from google.oauth2.service_account import Credentials

@st.cache_data(ttl=600)  # –û–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∫–æ–∂–Ω—ñ 10 —Ö–≤
def load_data():
    creds = Credentials.from_service_account_info(st.secrets["gcp_service_account"])
    gc = gspread.authorize(creds)
    sh = gc.open("TF_Dashboard_Data_Source")
    traffic = pd.DataFrame(sh.worksheet("FACT_Daily_Traffic").get_all_records())
    # ...
```

---

## üìù –ö–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—è

### –ó–º—ñ–Ω–∏—Ç–∏ –∫–æ–ª—å–æ—Ä–∏
–í `app.py` –∑–Ω–∞–π–¥–∏ –±–ª–æ–∫ `COLORS` —ñ –∑–º—ñ–Ω–∏:
```python
COLORS = {
    'blue': '#5B8DEF',    # –û—Å–Ω–æ–≤–Ω–∏–π –∞–∫—Ü–µ–Ω—Ç
    'green': '#3DDFA0',   # –ü–æ–∑–∏—Ç–∏–≤–Ω—ñ –∑–º—ñ–Ω–∏
    'red': '#F06A6A',     # –ù–µ–≥–∞—Ç–∏–≤–Ω—ñ –∑–º—ñ–Ω–∏
    ...
}
```

### –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –º–µ—Ç—Ä–∏–∫—É
1. –î–æ–¥–∞–π calculated field –≤ —Å–ª–æ–≤–Ω–∏–∫ `compute_kpis()`
2. –î–æ–¥–∞–π scorecard –∞–±–æ KPI pill –≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É —Å–µ–∫—Ü—ñ—é

### –ó–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä–æ–≥–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∞–ª–µ—Ä—Ç—ñ–≤
–ó–Ω–∞–π–¥–∏ `if kpi['reg2dep'] < 0.10:` —ñ –∑–º—ñ–Ω–∏ `0.10` –Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è.

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç—É

| –õ–∏—Å—Ç | –†—è–¥–∫—ñ–≤ | –û–ø–∏—Å |
|------|--------|------|
| FACT_Daily_Traffic | ~12,000 | –û—Å–Ω–æ–≤–Ω–∞ —Ñ–∞–∫—Ç-—Ç–∞–±–ª–∏—Ü—è |
| FACT_Payments | ~6,600 | –î–µ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è –ø–ª–∞—Ç—ñ–∂–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ |
| FACT_Agent_Weekly | ~2,300 | –ü–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å –∞–≥–µ–Ω—Ç—ñ–≤ |
| DIM_Geo | 8 | –î–æ–≤—ñ–¥–Ω–∏–∫ –∫—Ä–∞—ó–Ω |
| DIM_KPI_Targets | 8 | –¶—ñ–ª—å–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è |
| META_Calculated_Fields | 17 | –§–æ—Ä–º—É–ª–∏ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ |
| META_Data_Dictionary | 30 | –û–ø–∏—Å –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è |
